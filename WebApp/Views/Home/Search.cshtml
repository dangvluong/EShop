@{
    Layout = "_LayoutIndex";
}

@model IEnumerable<Product>
<div class="container">
    <div class="row">
        @foreach (var item in Model)
        {
            <div class="col-3">
                <a href="/home/detail/@item.ProductId">
                    <img src=@(item.ProductImages.Count == 0 ? "#" : $"/images/{item.ProductImages[0].ImageUrl}") alt="@item.ProductName" class="img-fluid" />
                    <p>@item.ProductName</p>
                    <p>@item.ProductId</p>
                </a>
                @{
                    if (item.PriceSaleOff == 0)
                    {
                        <p>Price: <b>@item.Price</b></p>
                    }
                    else
                    {
                        <p>Price: <del>@item.Price</del> <b>@item.PriceSaleOff</b> </p>
                    }
                }

            </div>
        }
    </div>
    <div class="d-flex">
        <ul class="pagination mx-auto">
            @for (int i = 1; i < ViewBag.totalPage; i++)
            {
                <li class="page-item"><a href="/home/search/@i/?query=@Context.Request.Query["query"]" class="page-link">@i</a></li>
            }
        </ul>
    </div>
</div>
<script>
    //console.log(@(ViewContext.RouteData.Values["id"] == null ? 0 : @Convert.ToInt32(ViewContext.RouteData.Values["id"]) - 1));
    $($('.page-item')[@(ViewContext.RouteData.Values["id"] == null ? 0 : @Convert.ToInt32(ViewContext.RouteData.Values["id"]) - 1)]).addClass('active');
</script>